<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Pathfinder Summit Bingo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,100..900;1,100..900&family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/rough-notation/lib/rough-notation.iife.js"></script>
</head>
<body>
    <!-- Arcade Background Pattern -->
    <div class="arcade-background hidden" id="arcadeBackground">
        <div class="arcade-machine bg-machine-1">
            <div class="screen">
                <div class="game-tetris">
                    <div class="tetris-blocks">
                        <div class="block t-block"></div>
                        <div class="block i-block"></div>
                        <div class="block l-block"></div>
                    </div>
                </div>
            </div>
            <div class="controls">
                <div class="joystick"></div>
                <div class="buttons">
                    <div class="button"></div>
                    <div class="button"></div>
                </div>
            </div>
        </div>
        
        <div class="arcade-machine bg-machine-2">
            <div class="screen">
                <div class="game-pacman">
                    <div class="pacman"></div>
                    <div class="dots">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                </div>
            </div>
            <div class="controls">
                <div class="joystick"></div>
                <div class="buttons">
                    <div class="button"></div>
                    <div class="button"></div>
                </div>
            </div>
        </div>
        
        <div class="arcade-machine bg-machine-3">
            <div class="screen">
                <div class="game-space">
                    <div class="spaceship"></div>
                    <div class="stars">
                        <div class="star"></div>
                        <div class="star"></div>
                        <div class="star"></div>
                    </div>
                </div>
            </div>
            <div class="controls">
                <div class="joystick"></div>
                <div class="buttons">
                    <div class="button"></div>
                    <div class="button"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>Pathfinder Summit Bingo</h1>
            <h2 class="hero-subtitle">Choose your card to begin</h2>
        </header>
        <!-- Card Selection Area - Fan Layout -->
        <section class="card-selection-hero">
            <div class="card-fan-container">
                <!-- Card 1: Generate New Card (Left) -->
                <div class="action-card-item" data-card="generate" data-position="left">
                    <div class="card-front">
                        <div class="card-icon">ğŸ²</div>
                        <h3 class="card-title">Generate<br>Card</h3>
                        <p class="card-description">Create your unique bingo card</p>
                    </div>
                </div>

                <!-- Card 2: Mark Existing Card (Center) -->
                <div class="action-card-item" data-card="mark" data-position="center">
                    <div class="card-front">
                        <div class="card-icon">âœï¸</div>
                        <h3 class="card-title">Mark<br>Card</h3>
                        <p class="card-description">Upload and mark your squares</p>
                    </div>
                </div>

                <!-- Card 3: Submit Claim (Right) -->
                <div class="action-card-item" data-card="submit" data-position="right">
                    <div class="card-front">
                        <div class="card-icon">ğŸ†</div>
                        <h3 class="card-title">Submit<br>Claim</h3>
                        <p class="card-description">Claim your winning reward</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Floating Navigation Wheel -->
        <nav class="nav-wheel" id="navWheel">
            <div class="nav-wheel-inner">
                <button class="nav-card-mini nav-home" data-nav="home" title="Home">
                    <span class="nav-icon">ğŸ </span>
                </button>
                <button class="nav-card-mini" data-nav="generate" title="Generate Card">
                    <span class="nav-icon">ğŸ²</span>
                </button>
                <button class="nav-card-mini" data-nav="mark" title="Edit Card">
                    <span class="nav-icon">âœï¸</span>
                </button>
                <button class="nav-card-mini" data-nav="submit" title="Submit Claim">
                    <span class="nav-icon">ğŸ†</span>
                </button>
            </div>
        </nav>

        <!-- Help/Instructions Button -->
        <button class="help-button" id="helpButton" title="How to Play">
            <span>?</span>
        </button>

        <!-- Help Modal -->
        <div class="help-modal hidden" id="helpModal">
            <div class="help-modal-content">
                <button class="help-close" id="helpClose">Ã—</button>
                <h3>ğŸ¯ How to Play Bingo</h3>
                <div class="help-content">
                    <h4>Getting Started:</h4>
                    <ol>
                        <li><strong>Generate Your Card:</strong> Click "Generate Card" to create a unique bingo card</li>
                        <li><strong>Download Immediately:</strong> Save your card as PNG right away - it won't be stored!</li>
                        <li><strong>Play During Event:</strong> Mark off squares as you complete activities</li>
                    </ol>
                    
                    <h4>Winning:</h4>
                    <ul>
                        <li>Complete any full row, column, or diagonal</li>
                        <li>You can win with multiple patterns on the same card</li>
                    </ul>
                    
                    <h4>Marking Your Card:</h4>
                    <ul>
                        <li><strong>Manual Option:</strong> Mark your physical or printed card yourself with a pen/marker</li>
                        <li><strong>Digital Option:</strong> Use our "Mark Card" tool to upload and mark your card digitally</li>
                        <li>Both methods are accepted for prize claims!</li>
                    </ul>
                    
                    <h4>Claiming Prize:</h4>
                    <ol>
                        <li><strong>Mark Your Card:</strong> Either manually or using our Card Marker tool</li>
                        <li><strong>Submit:</strong> Upload your completed card with name and email</li>
                        <li><strong>Wait:</strong> We'll contact you about your prize!</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Content Sections (Hidden by default, shown when card is clicked) -->
        <section class="content-sections">
            <!-- Generate Card Section -->
            <div class="content-section hidden" id="generateSection">
                <div class="section-header">
                    <h2>ğŸ² Generate New Card</h2>
                    <button id="generateCard" class="btn-round-dice" title="Generate New Card">ğŸ²</button>
                </div>
                <div class="section-content">
                    <!-- Instructions Box -->
                    <div class="info-box">
                        <p><strong>ğŸ“‹ How it works:</strong> Generate your card, download it immediately, and play during the event! When you win, you can either mark your card yourself and upload it, or use our Card Marker tool to mark it digitally before submitting your claim.</p>
                    </div>
                    
                    <!-- Download Alert Banner (shown after generation) -->
                    <div class="download-banner hidden" id="downloadBanner">
                        <div class="banner-content">
                            <span class="banner-icon">âš ï¸</span>
                            <div class="banner-text">
                                <strong>Download Your Card NOW!</strong>
                                <span>This card will disappear if you refresh or close this page.</span>
                            </div>
                            <button id="downloadPng" class="btn-download-round" title="Download PNG">ğŸ“¸</button>
                        </div>
                    </div>
                    
                    <!-- Bingo Card Display -->
                    <div id="bingoCard" class="bingo-card hidden">
                        <div class="card-header">
                            <div class="bingo-title">BINGO</div>
                            <div class="bingo-subtitle">PATHFINDER SUMMIT</div>
                        </div>
                        <div class="card-grid" id="cardGrid">
                            <!-- Grid cells will be populated by JavaScript -->
                        </div>
                        <div class="card-footer">
                            <div class="card-details">
                                <span class="cid" id="displayCid"></span>
                                <span class="proof" id="displayProof"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mark Card Section -->
            <div class="content-section hidden" id="markSection">
                <div class="section-header">
                    <h2>âœï¸ Mark Existing Card</h2>
                </div>
                <div class="section-content">
                    <!-- Instructions Box -->
                    <div class="info-box">
                        <p><strong>ğŸ“‹ How it works:</strong> Upload your bingo card, then click on completed squares to mark them. Purple squares get a checkmark âœ“, the FREE square gets a star â­. Click again to unmark.</p>
                    </div>
                    
                    <div class="mark-card-layout">
                        <div class="mark-controls">
                            <div class="form-group">
                                <label for="cardImageUpload">Upload Your Bingo Card: *</label>
                                <input type="file" id="cardImageUpload" accept="image/*">
                                <small>Upload a photo or screenshot of your bingo card</small>
                            </div>
                            
                            <div class="annotation-buttons hidden" id="annotationButtons">
                                <button id="clearAnnotations" class="btn btn-secondary">ğŸ§¹ Clear All Marks</button>
                                <button id="downloadAnnotated" class="btn btn-download">ğŸ’¾ Download Marked Card</button>
                            </div>
                        </div>
                        
                        <div class="mark-card-area">
                            <div id="uploadedCardContainer" class="uploaded-card-container hidden">
                                <div id="annotationCanvas" class="annotation-canvas">
                                    <img id="uploadedCardImage" alt="Your bingo card" />
                                    <canvas id="markCanvas" class="mark-canvas"></canvas>
                                </div>
                            </div>
                            
                            <div id="annotationPlaceholder" class="annotation-placeholder">
                                <div class="placeholder-content">
                                    <h3>ğŸ¯ Ready to Mark Your Card?</h3>
                                    <p>Upload your card and click squares to mark them!</p>
                                    <ul>
                                        <li>âœ“ Checkmark for completed squares</li>
                                        <li>â­ Star for FREE square</li>
                                        <li>ğŸ’¾ Download when finished</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Submit Claim Section -->
            <div class="content-section hidden" id="submitSection">
                <div class="section-header">
                    <h2>ğŸ† Submit Winning Claim</h2>
                </div>
                <div class="section-content">
                    <p class="section-intro">Got a winning pattern? Upload your completed card and claim your prize!</p>
                    
                    <div class="claim-form-wrapper">
                        <p class="claim-tip">ğŸ“¸ <strong>Simple Process:</strong> Upload your completed winning bingo card and fill out your details!</p>
                        <form id="claimForm">
                            <div class="form-group">
                                <label for="winningCardUpload">Upload Your Winning Card: *</label>
                                <input type="file" id="winningCardUpload" accept="image/*">
                                <small>Show us your completed bingo card with the winning pattern marked!</small>
                                <div id="cardPreview" class="upload-preview" style="display: none;">
                                    <img id="cardPreviewImage" alt="Your winning card" style="max-width: 100%; max-height: 200px; border: 2px solid var(--border); border-radius: 8px;">
                                    <p id="cardFileName" class="file-name"></p>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="claimName">Your Full Name: *</label>
                                <input type="text" id="claimName" placeholder="What should we call you?">
                            </div>
                            
                            <div class="form-group">
                                <label for="claimEmail">Email Address: *</label>
                                <input type="email" id="claimEmail" placeholder="Where can we reach you?">
                            </div>
                            
                            <button type="submit" class="btn btn-primary btn-claim">ğŸ† Submit My Winning Claim!</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- Status Messages -->
        <div id="statusMessages" class="status-messages"></div>

    <script src="app.js"></script>
</body>
</html>
